/**
 * address_books.js
 * http://www.cloudsponge.com/
 * Copyright(c) 2009-2011, Cloud Copy, Inc. info@cloudsponge.com
 *
 * This software and all associated files are protected by copyright.
 * This release is licensed for deployment and use only with Cloud Copy Inc.'s Address Book application.
 * All other distribution and use is forbidden.
 * This comment block must be retained in all deployments.
 */

// Don't include the script twice
if (!window.cloudsponge) {
/**
 * easyXDM
 * http://easyxdm.net/
 * Copyright(c) 2009-2011, Ã˜yvind Sean Kinsey, oyvind@kinsey.no.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
(function(N,d,p,K,k,H){var b=this;var n=Math.floor(Math.random()*10000);var q=Function.prototype;var Q=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var R=/[\-\w]+\/\.\.\//;var F=/([^:])\/\//g;var I="";var o={};var M=N.easyXDM;var U="easyXDM_";var E;var y=false;var i;var h;function C(X,Z){var Y=typeof X[Z];return Y=="function"||(!!(Y=="object"&&X[Z]))||Y=="unknown"}function u(X,Y){return !!(typeof(X[Y])=="object"&&X[Y])}function r(X){return Object.prototype.toString.call(X)==="[object Array]"}function c(){try{var X=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");i=Array.prototype.slice.call(X.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);h=parseInt(i[0],10)>9&&parseInt(i[1],10)>0;X=null;return true}catch(Y){return false}}var v,x;if(C(N,"addEventListener")){v=function(Z,X,Y){Z.addEventListener(X,Y,false)};x=function(Z,X,Y){Z.removeEventListener(X,Y,false)}}else{if(C(N,"attachEvent")){v=function(X,Z,Y){X.attachEvent("on"+Z,Y)};x=function(X,Z,Y){X.detachEvent("on"+Z,Y)}}else{throw new Error("Browser not supported")}}var W=false,J=[],L;if("readyState" in d){L=d.readyState;W=L=="complete"||(~navigator.userAgent.indexOf("AppleWebKit/")&&(L=="loaded"||L=="interactive"))}else{W=!!d.body}function s(){if(W){return}W=true;for(var X=0;X<J.length;X++){J[X]()}J.length=0}if(!W){if(C(N,"addEventListener")){v(d,"DOMContentLoaded",s)}else{v(d,"readystatechange",function(){if(d.readyState=="complete"){s()}});if(d.documentElement.doScroll&&N===top){var g=function(){if(W){return}try{d.documentElement.doScroll("left")}catch(X){K(g,1);return}s()};g()}}v(N,"load",s)}function G(Y,X){if(W){Y.call(X);return}J.push(function(){Y.call(X)})}function m(){var Z=parent;if(I!==""){for(var X=0,Y=I.split(".");X<Y.length;X++){Z=Z[Y[X]]}}return Z.easyXDM}function e(X){N.easyXDM=M;I=X;if(I){U="easyXDM_"+I.replace(".","_")+"_"}return o}function z(X){return X.match(Q)[3]}function f(X){return X.match(Q)[4]||""}function j(Z){var X=Z.toLowerCase().match(Q);var aa=X[2],ab=X[3],Y=X[4]||"";if((aa=="http:"&&Y==":80")||(aa=="https:"&&Y==":443")){Y=""}return aa+"//"+ab+Y}function B(X){X=X.replace(F,"$1/");if(!X.match(/^(http||https):\/\//)){var Y=(X.substring(0,1)==="/")?"":p.pathname;if(Y.substring(Y.length-1)!=="/"){Y=Y.substring(0,Y.lastIndexOf("/")+1)}X=p.protocol+"//"+p.host+Y+X}while(R.test(X)){X=X.replace(R,"")}return X}function P(X,aa){var ac="",Z=X.indexOf("#");if(Z!==-1){ac=X.substring(Z);X=X.substring(0,Z)}var ab=[];for(var Y in aa){if(aa.hasOwnProperty(Y)){ab.push(Y+"="+H(aa[Y]))}}return X+(y?"#":(X.indexOf("?")==-1?"?":"&"))+ab.join("&")+ac}var S=(function(X){X=X.substring(1).split("&");var Z={},aa,Y=X.length;while(Y--){aa=X[Y].split("=");Z[aa[0]]=k(aa[1])}return Z}(/xdm_e=/.test(p.search)?p.search:p.hash));function t(X){return typeof X==="undefined"}var O=function(){var Y={};var Z={a:[1,2,3]},X='{"a":[1,2,3]}';if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(Z).replace((/\s/g),"")===X){return JSON}if(Object.toJSON){if(Object.toJSON(Z).replace((/\s/g),"")===X){Y.stringify=Object.toJSON}}if(typeof String.prototype.evalJSON==="function"){Z=X.evalJSON();if(Z.a&&Z.a.length===3&&Z.a[2]===3){Y.parse=function(aa){return aa.evalJSON()}}}if(Y.stringify&&Y.parse){O=function(){return Y};return Y}return null};function T(X,Y,Z){var ab;for(var aa in Y){if(Y.hasOwnProperty(aa)){if(aa in X){ab=Y[aa];if(typeof ab==="object"&&!r(ab)){T(X[aa],ab,Z)}else{if(!Z){X[aa]=Y[aa]}}}else{X[aa]=Y[aa]}}}return X}function a(){var Y=d.body.appendChild(d.createElement("form")),X=Y.appendChild(d.createElement("input"));X.name=U+"TEST"+n;E=X!==Y.elements[X.name];d.body.removeChild(Y)}function A(X){if(t(E)){a()}var Z;if(E){Z=d.createElement('<iframe name="'+X.props.name+'"/>')}else{Z=d.createElement("IFRAME");Z.name=X.props.name}Z.id=Z.name=X.props.name;delete X.props.name;if(X.onLoad){v(Z,"load",X.onLoad)}if(typeof X.container=="string"){X.container=d.getElementById(X.container)}if(!X.container){T(Z.style,{position:"absolute",top:"-2000px"});X.container=d.body}var Y=X.props.src;delete X.props.src;T(Z,X.props);Z.border=Z.frameBorder=0;Z.allowTransparency=true;X.container.appendChild(Z);Z.src=Y;X.props.src=Y;return Z}function V(aa,Z){if(typeof aa=="string"){aa=[aa]}var Y,X=aa.length;while(X--){Y=aa[X];Y=new RegExp(Y.substr(0,1)=="^"?Y:("^"+Y.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(Y.test(Z)){return true}}return false}function l(Z){var ae=Z.protocol,Y;Z.isHost=Z.isHost||t(S.xdm_p);y=Z.hash||false;if(!Z.props){Z.props={}}if(!Z.isHost){Z.channel=S.xdm_c;Z.secret=S.xdm_s;Z.remote=S.xdm_e;ae=S.xdm_p;if(Z.acl&&!V(Z.acl,Z.remote)){throw new Error("Access denied for "+Z.remote)}}else{Z.remote=B(Z.remote);Z.channel=Z.channel||"default"+n++;Z.secret=Math.random().toString(16).substring(2);if(t(ae)){if(j(p.href)==j(Z.remote)){ae="4"}else{if(C(N,"postMessage")||C(d,"postMessage")){ae="1"}else{if(Z.swf&&C(N,"ActiveXObject")&&c()){ae="6"}else{if(navigator.product==="Gecko"&&"frameElement" in N&&navigator.userAgent.indexOf("WebKit")==-1){ae="5"}else{if(Z.remoteHelper){Z.remoteHelper=B(Z.remoteHelper);ae="2"}else{ae="0"}}}}}}}Z.protocol=ae;switch(ae){case"0":T(Z,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(Z.isHost){if(!Z.local){var ac=p.protocol+"//"+p.host,X=d.body.getElementsByTagName("img"),ad;var aa=X.length;while(aa--){ad=X[aa];if(ad.src.substring(0,ac.length)===ac){Z.local=ad.src;break}}if(!Z.local){Z.local=N}}var ab={xdm_c:Z.channel,xdm_p:0};if(Z.local===N){Z.usePolling=true;Z.useParent=true;Z.local=p.protocol+"//"+p.host+p.pathname+p.search;ab.xdm_e=Z.local;ab.xdm_pa=1}else{ab.xdm_e=B(Z.local)}if(Z.container){Z.useResize=false;ab.xdm_po=1}Z.remote=P(Z.remote,ab)}else{T(Z,{channel:S.xdm_c,remote:S.xdm_e,useParent:!t(S.xdm_pa),usePolling:!t(S.xdm_po),useResize:Z.useParent?false:Z.useResize})}Y=[new o.stack.HashTransport(Z),new o.stack.ReliableBehavior({}),new o.stack.QueueBehavior({encode:true,maxLength:4000-Z.remote.length}),new o.stack.VerifyBehavior({initiate:Z.isHost})];break;case"1":Y=[new o.stack.PostMessageTransport(Z)];break;case"2":Y=[new o.stack.NameTransport(Z),new o.stack.QueueBehavior(),new o.stack.VerifyBehavior({initiate:Z.isHost})];break;case"3":Y=[new o.stack.NixTransport(Z)];break;case"4":Y=[new o.stack.SameOriginTransport(Z)];break;case"5":Y=[new o.stack.FrameElementTransport(Z)];break;case"6":if(!i){c()}Y=[new o.stack.FlashTransport(Z)];break}Y.push(new o.stack.QueueBehavior({lazy:Z.lazy,remove:true}));return Y}function D(aa){var ab,Z={incoming:function(ad,ac){this.up.incoming(ad,ac)},outgoing:function(ac,ad){this.down.outgoing(ac,ad)},callback:function(ac){this.up.callback(ac)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var Y=0,X=aa.length;Y<X;Y++){ab=aa[Y];T(ab,Z,true);if(Y!==0){ab.down=aa[Y-1]}if(Y!==X-1){ab.up=aa[Y+1]}}return ab}function w(X){X.up.down=X.down;X.down.up=X.up;X.up=X.down=null}T(o,{version:"2.4.15.118",query:S,stack:{},apply:T,getJSONObject:O,whenReady:G,noConflict:e});o.DomHelper={on:v,un:x,requiresJSON:function(X){if(!u(N,"JSON")){d.write('<script type="text/javascript" src="'+X+'"><\/script>')}}};(function(){var X={};o.Fn={set:function(Y,Z){X[Y]=Z},get:function(Z,Y){var aa=X[Z];if(Y){delete X[Z]}return aa}}}());o.Socket=function(Y){var X=D(l(Y).concat([{incoming:function(ab,aa){Y.onMessage(ab,aa)},callback:function(aa){if(Y.onReady){Y.onReady(aa)}}}])),Z=j(Y.remote);this.origin=j(Y.remote);this.destroy=function(){X.destroy()};this.postMessage=function(aa){X.outgoing(aa,Z)};X.init()};o.Rpc=function(Z,Y){if(Y.local){for(var ab in Y.local){if(Y.local.hasOwnProperty(ab)){var aa=Y.local[ab];if(typeof aa==="function"){Y.local[ab]={method:aa}}}}}var X=D(l(Z).concat([new o.stack.RpcBehavior(this,Y),{callback:function(ac){if(Z.onReady){Z.onReady(ac)}}}]));this.origin=j(Z.remote);this.destroy=function(){X.destroy()};X.init()};o.stack.SameOriginTransport=function(Y){var Z,ab,aa,X;return(Z={outgoing:function(ad,ae,ac){aa(ad);if(ac){ac()}},destroy:function(){if(ab){ab.parentNode.removeChild(ab);ab=null}},onDOMReady:function(){X=j(Y.remote);if(Y.isHost){T(Y.props,{src:P(Y.remote,{xdm_e:p.protocol+"//"+p.host+p.pathname,xdm_c:Y.channel,xdm_p:4}),name:U+Y.channel+"_provider"});ab=A(Y);o.Fn.set(Y.channel,function(ac){aa=ac;K(function(){Z.up.callback(true)},0);return function(ad){Z.up.incoming(ad,X)}})}else{aa=m().Fn.get(Y.channel,true)(function(ac){Z.up.incoming(ac,X)});K(function(){Z.up.callback(true)},0)}},init:function(){G(Z.onDOMReady,Z)}})};o.stack.FlashTransport=function(aa){var ac,X,ab,ad,Y,ae;function af(ah,ag){K(function(){ac.up.incoming(ah,ad)},0)}function Z(ah){var ag=aa.swf+"?host="+aa.isHost;var aj="easyXDM_swf_"+Math.floor(Math.random()*10000);o.Fn.set("flash_loaded"+ah.replace(/[\-.]/g,"_"),function(){o.stack.FlashTransport[ah].swf=Y=ae.firstChild;var ak=o.stack.FlashTransport[ah].queue;for(var al=0;al<ak.length;al++){ak[al]()}ak.length=0});if(aa.swfContainer){ae=(typeof aa.swfContainer=="string")?d.getElementById(aa.swfContainer):aa.swfContainer}else{ae=d.createElement("div");T(ae.style,h&&aa.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});d.body.appendChild(ae)}var ai="callback=flash_loaded"+ah.replace(/[\-.]/g,"_")+"&proto="+b.location.protocol+"&domain="+z(b.location.href)+"&port="+f(b.location.href)+"&ns="+I;ae.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+aj+"' data='"+ag+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+ag+"'></param><param name='flashvars' value='"+ai+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+ai+"' allowScriptAccess='always' wmode='transparent' src='"+ag+"' height='1' width='1'></embed></object>"}return(ac={outgoing:function(ah,ai,ag){Y.postMessage(aa.channel,ah.toString());if(ag){ag()}},destroy:function(){try{Y.destroyChannel(aa.channel)}catch(ag){}Y=null;if(X){X.parentNode.removeChild(X);X=null}},onDOMReady:function(){ad=aa.remote;o.Fn.set("flash_"+aa.channel+"_init",function(){K(function(){ac.up.callback(true)})});o.Fn.set("flash_"+aa.channel+"_onMessage",af);aa.swf=B(aa.swf);var ah=z(aa.swf);var ag=function(){o.stack.FlashTransport[ah].init=true;Y=o.stack.FlashTransport[ah].swf;Y.createChannel(aa.channel,aa.secret,j(aa.remote),aa.isHost);if(aa.isHost){if(h&&aa.swfNoThrottle){T(aa.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"})}T(aa.props,{src:P(aa.remote,{xdm_e:j(p.href),xdm_c:aa.channel,xdm_p:6,xdm_s:aa.secret}),name:U+aa.channel+"_provider"});X=A(aa)}};if(o.stack.FlashTransport[ah]&&o.stack.FlashTransport[ah].init){ag()}else{if(!o.stack.FlashTransport[ah]){o.stack.FlashTransport[ah]={queue:[ag]};Z(ah)}else{o.stack.FlashTransport[ah].queue.push(ag)}}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.PostMessageTransport=function(aa){var ac,ad,Y,Z;function X(ae){if(ae.origin){return j(ae.origin)}if(ae.uri){return j(ae.uri)}if(ae.domain){return p.protocol+"//"+ae.domain}throw"Unable to retrieve the origin of the event"}function ab(af){var ae=X(af);if(ae==Z&&af.data.substring(0,aa.channel.length+1)==aa.channel+" "){ac.up.incoming(af.data.substring(aa.channel.length+1),ae)}}return(ac={outgoing:function(af,ag,ae){Y.postMessage(aa.channel+" "+af,ag||Z);if(ae){ae()}},destroy:function(){x(N,"message",ab);if(ad){Y=null;ad.parentNode.removeChild(ad);ad=null}},onDOMReady:function(){Z=j(aa.remote);if(aa.isHost){var ae=function(af){if(af.data==aa.channel+"-ready"){Y=("postMessage" in ad.contentWindow)?ad.contentWindow:ad.contentWindow.document;x(N,"message",ae);v(N,"message",ab);K(function(){ac.up.callback(true)},0)}};v(N,"message",ae);T(aa.props,{src:P(aa.remote,{xdm_e:j(p.href),xdm_c:aa.channel,xdm_p:1}),name:U+aa.channel+"_provider"});ad=A(aa)}else{v(N,"message",ab);Y=("postMessage" in N.parent)?N.parent:N.parent.document;Y.postMessage(aa.channel+"-ready",Z);K(function(){ac.up.callback(true)},0)}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.FrameElementTransport=function(Y){var Z,ab,aa,X;return(Z={outgoing:function(ad,ae,ac){aa.call(this,ad);if(ac){ac()}},destroy:function(){if(ab){ab.parentNode.removeChild(ab);ab=null}},onDOMReady:function(){X=j(Y.remote);if(Y.isHost){T(Y.props,{src:P(Y.remote,{xdm_e:j(p.href),xdm_c:Y.channel,xdm_p:5}),name:U+Y.channel+"_provider"});ab=A(Y);ab.fn=function(ac){delete ab.fn;aa=ac;K(function(){Z.up.callback(true)},0);return function(ad){Z.up.incoming(ad,X)}}}else{if(d.referrer&&j(d.referrer)!=S.xdm_e){N.top.location=S.xdm_e}aa=N.frameElement.fn(function(ac){Z.up.incoming(ac,X)});Z.up.callback(true)}},init:function(){G(Z.onDOMReady,Z)}})};o.stack.NameTransport=function(ab){var ac;var ae,ai,aa,ag,ah,Y,X;function af(al){var ak=ab.remoteHelper+(ae?"#_3":"#_2")+ab.channel;ai.contentWindow.sendMessage(al,ak)}function ad(){if(ae){if(++ag===2||!ae){ac.up.callback(true)}}else{af("ready");ac.up.callback(true)}}function aj(ak){ac.up.incoming(ak,Y)}function Z(){if(ah){K(function(){ah(true)},0)}}return(ac={outgoing:function(al,am,ak){ah=ak;af(al)},destroy:function(){ai.parentNode.removeChild(ai);ai=null;if(ae){aa.parentNode.removeChild(aa);aa=null}},onDOMReady:function(){ae=ab.isHost;ag=0;Y=j(ab.remote);ab.local=B(ab.local);if(ae){o.Fn.set(ab.channel,function(al){if(ae&&al==="ready"){o.Fn.set(ab.channel,aj);ad()}});X=P(ab.remote,{xdm_e:ab.local,xdm_c:ab.channel,xdm_p:2});T(ab.props,{src:X+"#"+ab.channel,name:U+ab.channel+"_provider"});aa=A(ab)}else{ab.remoteHelper=ab.remote;o.Fn.set(ab.channel,aj)}ai=A({props:{src:ab.local+"#_4"+ab.channel},onLoad:function ak(){var al=ai||this;x(al,"load",ak);o.Fn.set(ab.channel+"_load",Z);(function am(){if(typeof al.contentWindow.sendMessage=="function"){ad()}else{K(am,50)}}())}})},init:function(){G(ac.onDOMReady,ac)}})};o.stack.HashTransport=function(Z){var ac;var ah=this,af,aa,X,ad,am,ab,al;var ag,Y;function ak(ao){if(!al){return}var an=Z.remote+"#"+(am++)+"_"+ao;((af||!ag)?al.contentWindow:al).location=an}function ae(an){ad=an;ac.up.incoming(ad.substring(ad.indexOf("_")+1),Y)}function aj(){if(!ab){return}var an=ab.location.href,ap="",ao=an.indexOf("#");if(ao!=-1){ap=an.substring(ao)}if(ap&&ap!=ad){ae(ap)}}function ai(){aa=setInterval(aj,X)}return(ac={outgoing:function(an,ao){ak(an)},destroy:function(){N.clearInterval(aa);if(af||!ag){al.parentNode.removeChild(al)}al=null},onDOMReady:function(){af=Z.isHost;X=Z.interval;ad="#"+Z.channel;am=0;ag=Z.useParent;Y=j(Z.remote);if(af){Z.props={src:Z.remote,name:U+Z.channel+"_provider"};if(ag){Z.onLoad=function(){ab=N;ai();ac.up.callback(true)}}else{var ap=0,an=Z.delay/50;(function ao(){if(++ap>an){throw new Error("Unable to reference listenerwindow")}try{ab=al.contentWindow.frames[U+Z.channel+"_consumer"]}catch(aq){}if(ab){ai();ac.up.callback(true)}else{K(ao,50)}}())}al=A(Z)}else{ab=N;ai();if(ag){al=parent;ac.up.callback(true)}else{T(Z,{props:{src:Z.remote+"#"+Z.channel+new Date(),name:U+Z.channel+"_consumer"},onLoad:function(){ac.up.callback(true)}});al=A(Z)}}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.ReliableBehavior=function(Y){var aa,ac;var ab=0,X=0,Z="";return(aa={incoming:function(af,ad){var ae=af.indexOf("_"),ag=af.substring(0,ae).split(",");af=af.substring(ae+1);if(ag[0]==ab){Z="";if(ac){ac(true)}}if(af.length>0){aa.down.outgoing(ag[1]+","+ab+"_"+Z,ad);if(X!=ag[1]){X=ag[1];aa.up.incoming(af,ad)}}},outgoing:function(af,ad,ae){Z=af;ac=ae;aa.down.outgoing(X+","+(++ab)+"_"+af,ad)}})};o.stack.QueueBehavior=function(Z){var ac,ad=[],ag=true,aa="",af,X=0,Y=false,ab=false;function ae(){if(Z.remove&&ad.length===0){w(ac);return}if(ag||ad.length===0||af){return}ag=true;var ah=ad.shift();ac.down.outgoing(ah.data,ah.origin,function(ai){ag=false;if(ah.callback){K(function(){ah.callback(ai)},0)}ae()})}return(ac={init:function(){if(t(Z)){Z={}}if(Z.maxLength){X=Z.maxLength;ab=true}if(Z.lazy){Y=true}else{ac.down.init()}},callback:function(ai){ag=false;var ah=ac.up;ae();ah.callback(ai)},incoming:function(ak,ai){if(ab){var aj=ak.indexOf("_"),ah=parseInt(ak.substring(0,aj),10);aa+=ak.substring(aj+1);if(ah===0){if(Z.encode){aa=k(aa)}ac.up.incoming(aa,ai);aa=""}}else{ac.up.incoming(ak,ai)}},outgoing:function(al,ai,ak){if(Z.encode){al=H(al)}var ah=[],aj;if(ab){while(al.length!==0){aj=al.substring(0,X);al=al.substring(aj.length);ah.push(aj)}while((aj=ah.shift())){ad.push({data:ah.length+"_"+aj,origin:ai,callback:ah.length===0?ak:null})}}else{ad.push({data:al,origin:ai,callback:ak})}if(Y){ac.down.init()}else{ae()}},destroy:function(){af=true;ac.down.destroy()}})};o.stack.VerifyBehavior=function(ab){var ac,aa,Y,Z=false;function X(){aa=Math.random().toString(16).substring(2);ac.down.outgoing(aa)}return(ac={incoming:function(af,ad){var ae=af.indexOf("_");if(ae===-1){if(af===aa){ac.up.callback(true)}else{if(!Y){Y=af;if(!ab.initiate){X()}ac.down.outgoing(af)}}}else{if(af.substring(0,ae)===Y){ac.up.incoming(af.substring(ae+1),ad)}}},outgoing:function(af,ad,ae){ac.down.outgoing(aa+"_"+af,ad,ae)},callback:function(ad){if(ab.initiate){X()}}})};o.stack.RpcBehavior=function(ad,Y){var aa,af=Y.serializer||O();var ae=0,ac={};function X(ag){ag.jsonrpc="2.0";aa.down.outgoing(af.stringify(ag))}function ab(ag,ai){var ah=Array.prototype.slice;return function(){var aj=arguments.length,al,ak={method:ai};if(aj>0&&typeof arguments[aj-1]==="function"){if(aj>1&&typeof arguments[aj-2]==="function"){al={success:arguments[aj-2],error:arguments[aj-1]};ak.params=ah.call(arguments,0,aj-2)}else{al={success:arguments[aj-1]};ak.params=ah.call(arguments,0,aj-1)}ac[""+(++ae)]=al;ak.id=ae}else{ak.params=ah.call(arguments,0)}if(ag.namedParams&&ak.params.length===1){ak.params=ak.params[0]}X(ak)}}function Z(an,am,ai,al){if(!ai){if(am){X({id:am,error:{code:-32601,message:"Procedure not found."}})}return}var ak,ah;if(am){ak=function(ao){ak=q;X({id:am,result:ao})};ah=function(ao,ap){ah=q;var aq={id:am,error:{code:-32099,message:ao}};if(ap){aq.error.data=ap}X(aq)}}else{ak=ah=q}if(!r(al)){al=[al]}try{var ag=ai.method.apply(ai.scope,al.concat([ak,ah]));if(!t(ag)){ak(ag)}}catch(aj){ah(aj.message)}}return(aa={incoming:function(ah,ag){var ai=af.parse(ah);if(ai.method){if(Y.handle){Y.handle(ai,X)}else{Z(ai.method,ai.id,Y.local[ai.method],ai.params)}}else{var aj=ac[ai.id];if(ai.error){if(aj.error){aj.error(ai.error)}}else{if(aj.success){aj.success(ai.result)}}delete ac[ai.id]}},init:function(){if(Y.remote){for(var ag in Y.remote){if(Y.remote.hasOwnProperty(ag)){ad[ag]=ab(Y.remote[ag],ag)}}}aa.down.init()},destroy:function(){for(var ag in Y.remote){if(Y.remote.hasOwnProperty(ag)&&ad.hasOwnProperty(ag)){delete ad[ag]}}aa.down.destroy()}})};b.easyXDM=o})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);var _csdigest=(function(){function c(o,q){var p=o[0],n=o[1],s=o[2],r=o[3];p=a(p,n,s,r,q[0],7,-680876936);r=a(r,p,n,s,q[1],12,-389564586);s=a(s,r,p,n,q[2],17,606105819);n=a(n,s,r,p,q[3],22,-1044525330);p=a(p,n,s,r,q[4],7,-176418897);r=a(r,p,n,s,q[5],12,1200080426);s=a(s,r,p,n,q[6],17,-1473231341);n=a(n,s,r,p,q[7],22,-45705983);p=a(p,n,s,r,q[8],7,1770035416);r=a(r,p,n,s,q[9],12,-1958414417);s=a(s,r,p,n,q[10],17,-42063);n=a(n,s,r,p,q[11],22,-1990404162);p=a(p,n,s,r,q[12],7,1804603682);r=a(r,p,n,s,q[13],12,-40341101);s=a(s,r,p,n,q[14],17,-1502002290);n=a(n,s,r,p,q[15],22,1236535329);p=i(p,n,s,r,q[1],5,-165796510);r=i(r,p,n,s,q[6],9,-1069501632);s=i(s,r,p,n,q[11],14,643717713);n=i(n,s,r,p,q[0],20,-373897302);p=i(p,n,s,r,q[5],5,-701558691);r=i(r,p,n,s,q[10],9,38016083);s=i(s,r,p,n,q[15],14,-660478335);n=i(n,s,r,p,q[4],20,-405537848);p=i(p,n,s,r,q[9],5,568446438);r=i(r,p,n,s,q[14],9,-1019803690);s=i(s,r,p,n,q[3],14,-187363961);n=i(n,s,r,p,q[8],20,1163531501);p=i(p,n,s,r,q[13],5,-1444681467);r=i(r,p,n,s,q[2],9,-51403784);s=i(s,r,p,n,q[7],14,1735328473);n=i(n,s,r,p,q[12],20,-1926607734);p=e(p,n,s,r,q[5],4,-378558);r=e(r,p,n,s,q[8],11,-2022574463);s=e(s,r,p,n,q[11],16,1839030562);n=e(n,s,r,p,q[14],23,-35309556);p=e(p,n,s,r,q[1],4,-1530992060);r=e(r,p,n,s,q[4],11,1272893353);s=e(s,r,p,n,q[7],16,-155497632);n=e(n,s,r,p,q[10],23,-1094730640);p=e(p,n,s,r,q[13],4,681279174);r=e(r,p,n,s,q[0],11,-358537222);s=e(s,r,p,n,q[3],16,-722521979);n=e(n,s,r,p,q[6],23,76029189);p=e(p,n,s,r,q[9],4,-640364487);r=e(r,p,n,s,q[12],11,-421815835);s=e(s,r,p,n,q[15],16,530742520);n=e(n,s,r,p,q[2],23,-995338651);p=l(p,n,s,r,q[0],6,-198630844);r=l(r,p,n,s,q[7],10,1126891415);s=l(s,r,p,n,q[14],15,-1416354905);n=l(n,s,r,p,q[5],21,-57434055);p=l(p,n,s,r,q[12],6,1700485571);r=l(r,p,n,s,q[3],10,-1894986606);s=l(s,r,p,n,q[10],15,-1051523);n=l(n,s,r,p,q[1],21,-2054922799);p=l(p,n,s,r,q[8],6,1873313359);r=l(r,p,n,s,q[15],10,-30611744);s=l(s,r,p,n,q[6],15,-1560198380);n=l(n,s,r,p,q[13],21,1309151649);p=l(p,n,s,r,q[4],6,-145523070);r=l(r,p,n,s,q[11],10,-1120210379);s=l(s,r,p,n,q[2],15,718787259);n=l(n,s,r,p,q[9],21,-343485551);o[0]=d(p,o[0]);o[1]=d(n,o[1]);o[2]=d(s,o[2]);o[3]=d(r,o[3])}function k(v,p,o,n,u,r){p=d(d(p,v),d(n,r));return d((p<<u)|(p>>>(32-u)),o)}function a(p,o,v,u,n,r,q){return k((o&v)|((~o)&u),p,o,n,r,q)}function i(p,o,v,u,n,r,q){return k((o&u)|(v&(~u)),p,o,n,r,q)}function e(p,o,v,u,n,r,q){return k(o^v^u,p,o,n,r,q)}function l(p,o,v,u,n,r,q){return k(v^(o|(~u)),p,o,n,r,q)}function j(q){txt="";var t=q.length,r=[1732584193,-271733879,-1732584194,271733878],p;for(p=64;p<=q.length;p+=64){c(r,m(q.substring(p-64,p)))}q=q.substring(p-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=0;p<q.length;p++){o[p>>2]|=q.charCodeAt(p)<<((p%4)<<3)}o[p>>2]|=128<<((p%4)<<3);if(p>55){c(r,o);for(p=0;p<16;p++){o[p]=0}}o[14]=t*8;c(r,o);return r}function m(o){var p=[],n;for(n=0;n<64;n+=4){p[n>>2]=o.charCodeAt(n)+(o.charCodeAt(n+1)<<8)+(o.charCodeAt(n+2)<<16)+(o.charCodeAt(n+3)<<24)}return p}var h="0123456789abcdef".split("");function f(q){var p="",o=0;for(;o<4;o++){p+=h[(q>>(o*8+4))&15]+h[(q>>(o*8))&15]}return p}function b(n){for(var o=0;o<n.length;o++){n[o]=f(n[o])}return n.join("")}var g=function(n){return b(j(n))};function d(o,n){return(o+n)&4294967295}if(g("hello")!="5d41402abc4b2a76b9719d911017c592"){function d(n,q){var p=(n&65535)+(q&65535),o=(n>>16)+(q>>16)+(p>>16);return(o<<16)|(p&65535)}}return{md5:g}}());(function(){window.cloudsponge={easyXDM:window.easyXDM.noConflict("cloudsponge")};var A=cloudsponge.easyXDM;function H(ai){var aj={};ai.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(al,ak,an,am){aj[ak]=decodeURIComponent(am)});return aj}var e=(function(){var ai=document.getElementsByTagName("script");var an;var ak;var am={host:"api.cloudpsonge.com",scheme:"https",origin:"https://api.cloudsponge.com"};var al=new RegExp("^(https?:)?//([^/:]+):?([0-9]+)?/address_books.+js(.*)");var aj;for(ak=ai.length-1;ak>=0;ak--){an=ai[ak];aj=al.exec(an.src);if(aj){am.src=aj[0];if(aj[1]&&aj[1].length>1){am.scheme=aj[1]}else{am.scheme=window.location.protocol}am.host=aj[2];if(aj[3]&&aj[3].length>1){am.port=aj[3];am.origin=am.scheme+"//"+aj[2]+":"+aj[3]}else{am.origin=am.scheme+"//"+aj[2]}if(aj[4]&&aj[4].length>1){am.search=aj[4];am.queryParams=H(aj[4].substring(1))}break}}return am}());var l=(function(){var am={getRpcLocation:false,frameName:false,rpcAolCsv:false,rpcWlCsv:false,rpcReady:false};var ak=[];function al(an){return !!(an&&an.constructor&&an.call&&an.apply)}function aj(){var an;for(an in am){if(am.hasOwnProperty(an)){if(am[an]===false){return false}}}return true}function ai(an){am[an]=true;if(aj()){while(ak.length>0){ak.pop().call()}}}return{completed:function(an){if(al(an)){ak.push(an)}else{ai(an)}}}}());l.completed(function(){j("afterInit");if(F.length>0){d(F.pop())}});var ae=(e.queryParams&&e.queryParams.origin)||e.origin;var S=(function(){function ai(al,ak){if(ak){return ak+"["+al+"]"}return al}function aj(am,ak){var an=[],al=null;for(al in am){if(am[al] instanceof Function){an.push(ai(al,ak)+"=true")}else{if(am[al] instanceof Array){an.push(ai(al,ak)+"="+encodeURIComponent(am[al].join(",")))}else{if(am[al] instanceof Object){an=an.concat(aj(am[al],ai(al,ak)))}else{if(typeof am[al]!=="undefined"){an.push(ai(al,ak)+"="+encodeURIComponent(am[al]))}}}}}return an}return{constructQueryString:function(){var al,ak={};for(al=0;al<arguments.length;al++){A.apply(ak,arguments[al],true)}var am=aj(ak);return am.join("&")},deconstructQueryString:function(ao){var an={};var ak,al,am;al=ao.split("&");for(ak=0;ak<al.length;ak++){am=al[ak].split("=",2);an[am[0]]=am[1]}return an}}}());var ad=(function(){return{isMobile:function(){return navigator.userAgent&&navigator.userAgent.match(/Mobile/i)},isWebKit:function(){return navigator.userAgent&&navigator.userAgent.match(/ AppleWebKit\//i)},isAndroid:function(){return navigator.userAgent&&navigator.userAgent.match(/Android/i)}}}());(function(){A.DomHelper.requiresJSON(ae+"/javascripts/address_books/json2.min.js");u(ae+"/javascripts/address_books/floatbox.css","script")}());(function(){if(typeof(String.prototype.strip)!=="function"){String.prototype.strip=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(ak,al){var aj,ai=this.length;for(aj=(al||0);aj<ai;aj++){if(this[aj]===ak){return aj}}return -1}}}());var I=(function(){function ai(ak,aj){if(typeof A.Debug!=="undefined"&&typeof A.Debug.log!=="undefined"){A.Debug.log(ak+": "+aj);return true}return false}return{debug:function(aj){ai("DEBUG",aj)},warn:function(aj){if(!ai("WARN",aj)){if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log("WARN: "+aj)}}},info:function(aj){ai("INFO",aj)}}}());function C(ai){return(typeof ai!=="undefined"&&ai!==null)}function t(ak,aj,ai){if(ak.addEventListener){ak.addEventListener(aj,ai,false)}else{if(ak.attachEvent){ak.attachEvent("on"+aj,ai)}}}function D(ak){var aj=document.getElementsByTagName("script")[0],ai=null;if(aj){ai=aj.parentNode}if(!ai){ai=document.getElementsByTagName("body")[0]}if(!ai){ai=document.getElementsByTagName("head")[0]}return ai.appendChild(ak)}function Y(aj,ak){var ai=document.createElement("script");ai.setAttribute("type","text/javascript");ai.setAttribute("src",aj);D(ai)}function u(ai,ak){var aj=document.createElement("link");aj.setAttribute("type","text/css");aj.setAttribute("rel","stylesheet");aj.setAttribute("media","screen");aj.setAttribute("href",ai);D(aj)}var aa=function(){var ak=20*60*1000,ai=(new Date()).getTime(),aj=y+"="+M[y]+"&"+Q+"="+ai+"&"+ag+"="+c;M.sig=_csdigest.md5(aj.toLowerCase());M.timestamp=ai;setTimeout(aa,ak);return M.sig};var y="domain_key";var ag="origin";var Q="nonce";var W=["facebook","linkedin","yahoo","gmail","windowslive","aol","plaxo","addressbook","outlook"];var F=[];var B=false;var J=ad.isMobile()&&ad.isWebKit();var L=ad.isMobile()&&ad.isAndroid();var s=null;var V=false;var K=null;var g=window.location.host;var c=window.location.protocol+"//"+g;var X={include:["name","email"],initiallySelectedContacts:false,displaySelectAllNone:true,skipSourceMenu:false,mobile_render:false,force_mobile_render:false,display_branding:true,cache_contacts:true,easyXDM:{swf:null},csvProviders:{yahoo:false,gmail:false,windowslive:false,aol:false,linkedin:true,plaxo:false},floatbox:{},utmURL:function(){var ai="http://try.cloudsponge.com/powered-by-cloudsponge?utm_source="+g+"&utm_medium=cloudsponge-widget&utm_content=cloudsponge-logo&utm_campaign=powered-by-cloudsponge";return ai}};var M=A.apply({},X);var m=0,v=250,af=120;var r=function r(){if(M.display_branding){var ai=navigator.appVersion;if(parseInt(ai.substr(ai.indexOf("MSIE")+5),10)<7){return}var aj=document.createElement("div");aj.id="brand";if(M.utmURL){fb.setInnerHTML(aj,'<span style="float:right;margin-top:20px;border:none;border-width:0;"><a href='+M.utmURL()+' target="_blank"><img alt="Powered_by-grey" onmouseout="this.src=\''+ae+"/images/address_books/powered_by-grey.png?1296510503'\" onmouseover=\"this.src='"+ae+'/images/address_books/powered_by-color.png?1296510503\'" src="'+ae+'/images/address_books/powered_by-grey.png?1296510503" style="border-width:0;" /></a></span><span style="float:right;color:white;font-size:10px;font-family:verdana;margin-top:23px;margin-right:10px">powered by</span>')}else{fb.setInnerHTML(aj,'<span style="float:right;margin-top:20px;border:none;border-width:0;"><img alt="Powered_by-grey" onmouseout="this.src=\''+ae+"/images/address_books/powered_by-grey.png?1296510503'\" onmouseover=\"this.src='"+ae+'/images/address_books/powered_by-color.png?1296510503\'" src="'+ae+'/images/address_books/powered_by-grey.png?1296510503" style="border-width:0;" /></span><span style="float:right;color:white;font-size:10px;font-family:verdana;margin-top:23px;margin-right:10px">powered by</span>')}fb.fbBox.appendChild(aj)}};var ah=function ah(){if(M.display_branding){var ai=navigator.appVersion;if(parseInt(ai.substr(ai.indexOf("MSIE")+5),10)<7){return}fb$("brand").style.display="none"}};var T=function T(){var ak=S.constructQueryString(M,{deep:false});var aj=window.document.createElement("iframe");var al=ae+"/address_books";if(K){al=al+"/"+K.service+"/"+K.act;K=null}al=al+"?"+ak;aj.id=aj.name="cs_container_frame";aj.src=al;aj.setAttribute("frameBorder","0");aj.style.width="100%";aj.style.height="100%";t(aj,"load",function(){O()});if(M.widgetContainerId){var ai=fb$(M.widgetContainerId);if(ai){ai.appendChild(aj)}}else{fb$("cs_container").appendChild(aj)}return true};var p=function(an,ai,ao){var ak=fb$("fbOverlay");var am=i();var aj=document.body.clientWidth;var al={top:0,left:0,height:Math.max(an.height,am),width:Math.max(an.width,aj)};n(al)};var O=function O(){var ai,aj;ai=fb$("fbContentWrapper");aj=fb$("cs_container_frame");if(ai&&aj){aj.style.height=ai.style.height}};var o=function o(){n({top:0,left:0,width:document.body.clientWidth})};var k=function k(){j("beforeClosing",null);var ai=fb$("cs_container_frame");if(ai){ai.parentNode.removeChild(ai)}return true};var G=function G(){j("afterClosing",null);if(s){s.unloadFrame()}k()};function R(ak){var ai,al={selectedEmail:function(){var am;if(this.email!==null&&typeof this.email!=="undefined"){for(am=0;am<this.email.length;am++){if(this.email[am].selected){return this.email[am].address}}}return this.primaryEmail&&this.primaryEmail()},primaryEmail:function(){if(this.email!==null&&typeof this.email!=="undefined"&&this.email[0]!==null&&typeof this.email[0]!=="undefined"){return this.email[0].address}else{return""}},fullName:function(){return(this.first_name||"")+" "+(this.last_name||"")}};for(ai=0;ai<ak.length;ai++){for(var aj in al){if(aj){ak[ai][aj]=al[aj]}}}return ak}function Z(ai){if(ai&&ai.strip().length>0){return ai.strip()}return null}function z(aj,ai,ak){if(ak===undefined){ak=false}if(ak){aj='"'+(Z(aj)||ai)+'"'}if(Z(aj)){return aj+" <"+ai+">"}else{return ai}}function U(ao,am,al,ak){if(al===undefined){al=", "}if(ak===undefined){ak=false}var an=[];var aj,ai;if((am.toString().indexOf("name")<0)){for(aj=0;aj<ao.length;aj++){ai=ao[aj].selectedEmail();if(ai){an.push(ai)}}}else{for(aj=0;aj<ao.length;aj++){ai=ao[aj].selectedEmail();if(ai){an.push(z(ao[aj].fullName(),ai,ak))}}}return an.join(al)}function j(al){I.debug("Invoking Callback: "+al);var aj=[].slice.apply(arguments).slice(1,arguments.length);var ai=null;if(M[al]!==undefined&&M[al]!==null){try{ai=M[al].apply(null,aj)}catch(ak){I.warn("Attempt to invoke callback ["+al+"] failed: "+ak)}}return ai}function a(aj,ai){list_element=fb$(M[aj]);if(list_element){list_element.value=ai}}function P(){try{var ai=_gat._getTrackerByName();_gaq.push(["myTracker._trackEvent","widget","launch"]);setTimeout(csLaunch,100)}catch(aj){}}function x(ai){ai.setAttribute("data-cs-init",true);if(!ai.getAttribute("href")){ai.setAttribute("href","#cs_container")}ai.onclick=function(){return csLaunch()}}function f(ak,ai){var aj;if(typeof(onImportComplete)!="undefined"){aj=U(ak,ai.include,",",true);if(fb$(M.textarea_id)){a("textarea_id",aj)}onImportComplete(aj)}else{if(fb$(M.textarea_id)){aj=U(ak,ai.include);a("textarea_id",aj)}}}function q(an){V=true;s.getRpcLocation(function(ap){A.apply(M,S.deconstructQueryString(ap.search.substring(1)));l.completed("getRpcLocation")});s.frameName(function(ap){M.providerFrame=ap;l.completed("frameName")});if(typeof M.csvProviders.windowslive==="undefined"||!M.csvProviders.windowslive){s.wlCsv(function(ap){M.csvProviders.windowslive=ap;l.completed("rpcWlCsv")})}if(typeof M.csvProviders.aol==="undefined"||!M.csvProviders.aol){s.aolCsv(function(ap){M.csvProviders.aol=ap;l.completed("rpcAolCsv")})}var am=document.getElementsByTagName("div");var al,ak,aj;for(al=0;al<am.length;al++){ak=am[al];if(ak.className.match("cs_import")&&ak.getAttribute("data-cs-init")===null){link_visible=true;aj=document.createElement("a");x(aj);aj.innerHTML="Add from Address Book";ak.appendChild(aj)}}am=document.getElementsByTagName("a");for(al=0;al<am.length;al++){ak=am[al];if(ak.className.match("cs_import")&&ak.getAttribute("data-cs-init")===null){link_visible=true;x(ak)}}var ai=document.getElementsByTagName("body")[0];if(!document.getElementById("cs_container")){var ao=document.createElement("div");ao.setAttribute("id","cs_container");ao.style.display="none";ai.appendChild(ao)}if(!document.getElementById("cs_link")){aj=document.createElement("a");x(aj);aj.id="cs_link";aj.style.display="none";ai.appendChild(aj)}l.completed("rpcReady")}function ac(){link_visible=false;try{var ai={onReady:q,remote:ae+"/address_books/provider"};if(M.easyXDM.swf){ai.swf=M.easyXDM.swf;ai.remote=ai.remote+"?swf="+encodeURI(M.easyXDM.swf)}s=new A.Rpc(ai,{local:{getOptions:function(){return M},beforeImport:function(am){j("beforeImport",am)},afterImport:function(am,an){j("afterImport",am,an)},beforeDisplayContacts:function(aq,ar,ao,an,at){var ap=R(aq);if(ap){var am=j("beforeDisplayContacts",ap,ar,ao);if(am===false){f(ap,M);fb.end()}}},afterSubmitContacts:function(ap,aq,an,am,ar){var ao=R(ap);f(ao,M);j("afterSubmitContacts",ao,aq,an);fb.end()},afterClose:function(am,an){j("afterClose",null);fb.end()},resizeFrame:p},remote:{updateOptions:{},unloadFrame:{},getRpcLocation:{},frameName:{},wlCsv:{},aolCsv:{}}})}catch(ak){var aj="{";for(var al in ak){if(ak.hasOwnProperty(al)){aj+=al+": "+ak[al]+" "}}aj+="}";I.warn("easyXDM.Rpc exception: "+aj)}j("afterLoad")}function n(aj){var ak=fb$("cs_container_frame");var al=fb$("fbContentWrapper");var ai=fb$("fbBox");if(ak&&al&&ai){if(aj.width){al.style.width=ak.style.width=aj.width+"px"}if(aj.height){al.style.height=ak.style.height=aj.height+"px"}if(aj.top!==undefined&&aj.top!==null){ai.style.top=aj.top+"px"}if(aj.left!==undefined&&aj.left!==null){ai.style.left=aj.left+"px"}window.scrollTo(0,window.scrollY)}}function i(){var ai=document;return Math.max(Math.max(ai.body.scrollHeight,ai.documentElement.scrollHeight),Math.max(ai.body.offsetHeight,ai.documentElement.offsetHeight),Math.max(ai.body.clientHeight,ai.documentElement.clientHeight))}function N(){if(!B&&window.JSON===undefined){Y(ae+"/javascripts/address_books/json2.min.js");B=true}if(A!==undefined&&window.JSON!==undefined&&M.domain_key!==undefined){ac()}else{if(m++<af){setTimeout(N,v)}else{if(A===undefined){I.warn("Unable to load easyXDM, cannot initialize widget.")}else{if(window.JSON===undefined){I.warn("Unable to load JSON, cannot initialize widget.")}else{if(M.domain_key===undefined){I.warn("csOptions are not initialized. Please set the value of csOptions according to the documentation: http://www.cloudsponge.com/developer/widget")}else{I.warn("Timed out while waiting for easyXDM to become ready.")}}}}}}function E(){A.apply(w,M.floatbox);if(M.force_mobile_render||(M.mobile_render&&J)){window.onresize=o;window.document.body.onorientationchange=o;A.apply(w,h)}}function b(aj){var ai=true;if(C(aj)&&C(aj.loadProvider)){ai=aj.loadProvider;delete aj.loadProvider}return ai}var ab=function(aj){A.apply(M,window.csPageOptions);A.apply(M,aj);aa();E();var ai=b(window.csPageOptions);ai=b(M)&&ai;if(ai&&M.domain_key){if(s){s.updateOptions(M)}else{V=false;s=null;N()}}else{j("afterInit")}};var d=function(aj){var ai=null,ak=null,al=null;K=null;aa();if(V){if(j("beforeLaunch")!==false){if(aj&&typeof aj.toLowerCase!=="undefined"&&aj.toLowerCase!==null){aj=aj.toLowerCase();if(W.indexOf(aj)!==-1){K={};K.service=aj.toLowerCase();K.act="wait";switch(K.service){case"aol":if(M.csvProviders.aol){K.act="auth"}else{ai=395;ak=420}break;case"yahoo":ai=400;ak=600;break;case"linkedin":K.act="auth";M.csv=true;break;case"facebook":ai=400;ak=420;break;case"gmail":ai=640;ak=420;break;case"windowslive":if(M.csvProviders.windowslive){K.act="auth"}else{ai=600;ak=420}break;default:K.act="auth"}if(ai){al=ae+"/address_books/"+aj+"/auth?"+S.constructQueryString(M,{deep:true});s.popup=window.open(al,"_csimport","height="+ai+",width="+ak+",scrollbars=1")}}}if(!M.widgetContainerId){fb.start(fb$("cs_link"))}T()}}else{F.push(aj)}return false};var w={type:"iframe",width:410,height:487,scrolling:"no",outerBorder:1,innerBorder:0,padding:20,disableScroll:true,outsideClickCloses:false,enableKeyboardNav:false,controlsPos:"tr",resizeDuration:2.5,startAtClick:false,afterItemStart:function(){r();O();j("afterLaunch")},beforeBoxEnd:function(){G();ah()}};var h={width:"100%",height:"100%",boxLeft:0,boxTop:0,roundCorners:"none",outerBorder:0,padding:0,panelPadding:0,shadowType:"none",shadowSize:0,showClose:false,afterItemStart:function(){p({height:fb$("cs_container_frame").clientHeight,width:fb$("cs_container_frame").clientWidth});j("afterLaunch")},beforeBoxEnd:G};window.csLaunch=d;window.csInit=ab;window.fbPageOptions=w;A.whenReady(function(){if(window.csPageOptions){ab()}});A.apply(window.cloudsponge,{init:ab,launch:d,options:M,isMobileSafari:J,getRpc:function(){return s}})}());/*******************************************************************************************************
* Floatbox v4.21.cloudcopy
* November 23, 2010
*
* Copyright (c) 2008-2010 Byron McGregor
* Website: http://randomous.com/floatbox
* This software and all associated files are protected by copyright.
* This release is licensed for deployment and use only with Cloud Copy Inc.'s Address Book application.
* All other distribution and use is forbidden.
* This comment block must be retained in all deployments.
*******************************************************************************************************/
function Floatbox(){var a=this;a.proto=Floatbox.prototype;a.extend=function(){var d=arguments,h=d[0]||{},g,c,f;for(var e=1,b=d.length;e<b;e++){if((g=d[e])&&typeof g==="object"){for(c in g){if(g.hasOwnProperty(c)&&(f=g[c])!==a[fb.VT]){h[c]=f}}}}return h};a.CG=[];a.HG=function(c){var b;while((b=a.CG.shift())){b()}}}Floatbox.prototype.customPaths={installBase:"",modules:"",languages:"",graphics:""};self.fb=new Floatbox;fb.extend(fb.proto,{PA:"absolute",PB:"activateElements",PC:"addEvent",PD:"addEventListener",PE:"afterFBLoaded",PF:"afterItemEnd",PG:"appendChild",PH:"array",PI:"auto",PJ:"autoFitHTML",PK:"autoFitSpace",PL:"autoStart",PM:"backgroundColor",PN:"backgroundImage",PO:"backgroundPosition",PP:"beforeItemEnd",PQ:"beforeItemStart",PR:"boolean",PS:"borderWidth",PT:"caption",PU:"caption2Left",PV:"className",PW:"clientHeight",PX:"clientWidth",PY:"colorTheme",PZ:"compareDocumentPosition",QA:"controlsCorner",QB:"controlsLeft",QC:"controlsPos",QD:"Corner",QE:"cornerRadius",QF:"createElement",QG:"currentIndex",QH:"currentItem",QI:"customPaths",QJ:"defaultView",QK:"disableScroll",QL:"display",QM:"document",QN:"documentElement",QO:"draggerLocation",QP:"enableDragMove",QQ:"enableDragResize",QR:"enableKeyboardNav",QS:"enableQueryStringOptions",QT:"encodeHTML",QU:"executeJS",QV:"fbBoxLiner",QW:"fbCaliper",QX:"fbCaption",QY:"fbCaption2",QZ:"fbContent",RA:"fbContentWrapper",RB:"fbControls",RC:"fbCornerBottom",RD:"fbCornerRight",RE:"fbCorners2",RF:"fbCornerTop",RG:"fbDragger",RH:"fbIframeHider",RI:"fbIndexLinks",RJ:"fbInfoLink",RK:"fbItemNumber",RL:"fbLeftNav",RM:"fbLoaderGif",RN:"fbNavControls",RO:"fbNewWindowLink",RP:"fbOverlay",RQ:"fbOverlayNext",RR:"fbOverlayPrev",RS:"fbPrintLink",RT:"fbResizer",RU:"fbRightNav",RV:"fbShadows",RW:"fbSubControls",RX:"fbZoomDiv",RY:"fbZoomImg",RZ:"firstChild",SA:"fixed",SB:"frame",SC:"function",SD:"getAttribute",SE:"getElementById",SF:"getElementsByClassName",SG:"getElementsByTagName",SH:"getIframeDocument",SI:"getIframeWindow",SJ:"getLayout",SK:"getOuterHTML",SL:"getScroll",SM:"getStyle",SN:"getViewport",SO:"getViewportHeight",SP:"getViewportWidth",SQ:"globalOptions",SR:"hidden",SS:"iframe",ST:"image",SU:"imageFadeDuration",SV:"indexLinksCorner",SW:"indexOf",SX:"infoLinkCorner",SY:"inline",SZ:"innerBorder",TA:"innerHTML",TB:"instances",TC:"itemNumberCorner",TD:"lastChild",TE:"loadPageOnClose",TF:"maxIndexThumbSize",TG:"media",TH:"mousemove",TI:"mouseout",TJ:"mouseover",TK:"mouseup",TL:"moveWithMouse",TM:"newWindowLinkCorner",TN:"nodeContains",TO:"nodeType",TP:"nofloatbox",TQ:"none",TR:"numIndexLinks",TS:"object",TT:"offsetHeight",TU:"offsetLeft",TV:"offsetTop",TW:"offsetWidth",TX:"onclick",TY:"onmousemove",TZ:"onmouseout",UA:"onmouseover",UB:"onreadystatechange",UC:"outerBorder",UD:"outsideClickCloses",UDD:"zIndex",UE:"overlayFadeDuration",UF:"overlayOpacity",UG:"ownerDocument",UH:"paddingBottom",UI:"paddingLeft",UJ:"paddingRight",UK:"Panel",UL:"parentNode",UM:"parentWindow",UN:"position",UO:"printLinkCorner",UP:"proportional",UQ:"proportionalResize",UR:"Radius",US:"removeAttribute",UT:"removeChild",UU:"removeEvent",UV:"replace",UW:"resizeDuration",UX:"resizeTool",UY:"roundCorners",UZ:"setAttribute",VA:"setInnerHTML",VB:"setRequestHeader",VC:"shadowSize",VD:"shadowType",VE:"showContent",VF:"showHints",VG:"showItemNumber",VH:"showNavOverlay",VI:"showNewWindowIcon",VJ:"showPlayPause",VK:"silverlight",VL:"slideshow",VM:"splitResize",VN:"stopEvent",VO:"string",VP:"strings",VQ:"substring",VR:"toLowerCase",VS:"touchstart",VT:"undefined",VU:"visibility",VV:"visible",VW:"WidgetDiv",VX:"winload"});(function(){var a=true,b=false,c=null;fb.extend(fb.proto,{version:"4.21.cloudsponge",build:"2010/11/23",CC:{roundCorners:"all",cornerRadius:12,shadowType:"drop",shadowSize:12,outerBorder:1,innerBorder:1,padding:24,panelPadding:8,overlayOpacity:55,doAnimations:a,resizeDuration:3.5,imageFadeDuration:3,overlayFadeDuration:4,startAtClick:a,zoomImages:a,splitResize:"no",colorTheme:fb.PI,autoFitImages:a,autoFitHTML:a,autoFitMedia:a,autoFitSpace:5,resizeImages:a,resizeTool:"cursor",liveImageResize:a,enableDragResize:b,stickyDragResize:a,draggerLocation:fb.SB,boxLeft:fb.PI,boxTop:fb.PI,captionPos:"bl",caption2Pos:"tc",infoLinkPos:"bl",printLinkPos:"bl",newWindowLinkPos:"tr",itemNumberPos:"bl",indexLinksPos:"br",controlsPos:"br",centerNav:b,enableDragMove:a,stickyDragMove:a,showClose:a,showItemNumber:a,showNewWindowIcon:a,closeOnNewWindow:b,controlsType:fb.PI,strongControls:b,showHints:"once",outsideClickCloses:a,zIndex:90000,imageClickCloses:b,enableKeyboardNav:a,navType:"both",navOverlayWidth:35,navOverlayPos:30,showNavOverlay:"never",enableWrap:a,numIndexLinks:0,showIndexThumbs:a,pipIndexThumbs:a,maxIndexThumbSize:0,randomOrder:b,slideInterval:4.5,endTask:"exit",showPlayPause:a,startPaused:b,pauseOnPrev:a,pauseOnNext:b,pauseOnResize:a,cycleInterval:5,cycleFadeDuration:4.5,cyclePauseOnHover:b,licenseKey:"eml5v65Av65yzWlGtqN9srlCvKhzwKg3eUT",titleAsCaption:a,hideObjects:a,hideJava:a,showIE6EndOfLife:b,modal:a,centerOnResize:a,disableScroll:b,cacheAjaxContent:b,youtubeAutoEnd:a,preloadAll:a,language:fb.PI,floatboxClass:"floatbox",cycleClass:"fbCycler",tooltipClass:"fbTooltip",ie9betaSafe:a},HQ:20,ER:16,BO:60,LF:1,BP:8,GH:140,GG:100,JQ:750,FY:120,GI:70,IN:15,CS:45,FU:Math.ceil,FV:Math.floor,FW:Math.log,O:Math.max,P:Math.min,FX:Math.random,Q:Math.round,EQ:Infinity,KF:String.fromCharCode,DJ:function(d){return parseInt(d,10)},DG:function(d){return parseFloat(d)},I:function(d,e){return setTimeout(d,e)},KV:function(d){return !!(d&&d.D&&d.KG!=="direct"&&d.KG!==fb.SY)},HD:function(){return(new Date).getTime()},AO:(location.protocol+"//"+location.host)[fb.VR](),AV:(navigator.language||navigator.userLanguage||navigator.systemLanguage||navigator.AV||"en")[fb.VQ](0,2),instances:[],children:[],anchors:[],G:[],X:[],HW:[],HX:[],AD:[],GK:{},HZ:{},CQ:{},L:{},HP:{},CR:{},JX:function(){if(!document.body){return fb.I(fb.JX,50)}var d="self",f=(self.fbPageOptions&&fbPageOptions.framed)||/framed/.test(fb.FH);if(!(f||self===parent)){try{if(!fb.FD(parent.location.href)){d="parent"}}catch(g){}if(d==="parent"&&!(parent.fb&&parent.fb.ET)){return fb.I(fb.JX,50)}}if(document.compatMode==="BackCompat"){if(console!==null&&console.error!==null){console.error("Floatbox does not support quirks mode. Page needs to have a valid doctype declaration.")}return}if(d==="self"){fb.ES()}else{self.fb=parent.fb}(function(){var e=self[fb.QM],h=e&&e.body;if(!(h&&fb.ET)){return fb.I(arguments.callee,50)}fb.AD.push(self);document.fbAnchorCount=h[fb.SG]("a").length;if(fb.EM){fb.proto.BG=fb.DT(fb.DC())}fb[fb.PB](h);fb[fb.PC](fb.ie?h:e,"mousedown",function(i){try{fb.BI=i.clientX;fb.BJ=i.clientY;fb.BH=i.target;fb.I(function(){try{fb.BI=fb.BJ=fb.BH=c}catch(j){}},250)}catch(i){}});if(d==="self"){fb.K(c,fb.PE)}if(fb[fb.PL]){fb.I(function(){if(!fb.AN){fb.AN=a;fb.start(fb[fb.PL])}},100)}if(fb.EK===a){fb.DK("ie6")}})()},ES:function(){var l=this,h=fb.proto;function j(n){return n+(n[fb.VQ](n.length-1)==="/"?"":"/")}if(!l.EX){h.EX=j(l[fb.QI].installBase||l.DN("script","src",/(.*)floatbox.js(?:\?|$)/i)||l.DN("link","href",/(.*)floatbox.css(?:\?|$)/i)||"/floatbox/")}if(!l[fb.SQ]){l.DK("options",l.EX);l.I(function(){l.ES()},25);return}l[fb.TB].push(l);l.M=l.JS=l[fb.TB].length-1;l.F=[];l.HB=[];l.EA=[];l.KL={};l.T={};l.BU={};l.EZ=fb.ET;if(!l.EZ){l.parent=l.fbParent=l.topBox=l[fb.TD]=l;l.DM();var f={},k=navigator.userAgent,d=navigator.appVersion,i;function e(o,n){return l.DG(o.split(n)[1])}f.FS=d[fb.SW]("Macintosh")>-1;if(l.EN){f.ie=a;f.ie9=l.EN===9;f.EM=l.EN<9;f.EL=l.EN<8;f.EK=l.EN<7;f.EO=(i=e(d,"Windows NT "))&&i<6;f.EI=d[fb.SW](" x64;")>0}else{if(window.opera){f.opera=a;if(/Opera M(ob|in)i/.test(k)){f.mobile=a}else{f.HJ=opera.version()<9.5;f.HI=opera.version()>=10.5}}else{if(k[fb.SW]("AppleWebKit")>=0){f.KZ=a;f.LA=f.FS;f.mobile=k[fb.SW]("Mobile")>=0}else{if((i=e(k,"Firefox/"))){f.ff=a;f.CW=i<3;f.CV=!f.CW;f.CU=f.FS}else{if((i=e(k,"SeaMonkey/"))){f.seaMonkey=a;f.IZ=i<2}}}}}if(/Kindle|nook brow/.test(k)){f.IF=a}l.extend(h,f,{HE:{},Z:self,H:document,CE:document[fb.QN],CF:document[fb.SG]("head")[0],C:document.body,GJ:j(l[fb.QI].modules||l.EX+"modules/"),FK:j(l[fb.QI].languages||l.EX+"languages/"),DP:j(l[fb.QI].graphics||l.EX+"graphics/"),rtl:l[fb.SM](document.body,"direction")==="rtl"});l.DK("core")}else{l.parent=l.fbParent=fb[fb.TD];fb.topBox=fb[fb.TD]=l;fb.children.push(l)}var m=l.DP;l.IO=m+"magnify_plus.cur";l.IK=m+"magnify_minus.cur";l.HC=m+"404.jpg";l.AQ=m+"blank.gif";var g=/\bautoStart=(.+?)(?:&|$)/i.exec(location.search);l.AM=g?g[1]:c;l.ET=a;return l},DN:function(e,d,j){var h=document[fb.SG](e),g=h.length,f;while(g--){if((f=j.exec(h[g][d]))){return f[1]||"./"}}return""},DM:function(){var e=this,d;function f(i){var h={},g;for(g in i){if(i.hasOwnProperty(g)){h[g==="img"?fb.ST:g]=e.HS(i[g])}}return h}e.L.L=e[fb.SQ].globalOptions||{};e.L.BC=e[fb.SQ].childOptions||{};e.L.KS=f(e[fb.SQ].typeOptions);e.L.BE=f(e[fb.SQ].classOptions);e.HP.L=self.fbPageOptions||{};e.HP.BC=self.fbChildOptions||{};e.HP.KS=f(self.fbTypeOptions);e.HP.BE=f(self.fbClassOptions);if((e.L.L.enableCookies||e.HP.L.enableCookies)&&(d=/fbOptions=(.+?)(;|$)/.exec(document.cookie))){e.extend(e.CR,e.HS(d[1]))}if(e.L.L[fb.QS]||e.HP.L[fb.QS]||(location.search&&/enableQueryStringOptions=true/i.test(location.search))){e.extend(e.CR,e.HS(location.search[fb.VQ](1)))}e.JE(e.CC);e.JE(e.L.L);e.JE(e.HP.L);e.JE(e.CR)},JD:function(d,e){var g=this,i={},h=g.L,j=g.HP,f=((d.AH||"")+" "+(d.FF.BD||""))[fb.UV](/\s+/g," ")[fb.UV](/^\s+|\s+$/g,"").split(" ");function k(n){var l={},m=f.length;while(m--){g.extend(l,n.BE[f[m]])}return l}g.extend(i,g.CC,h.L);if(e){g.extend(i,h.BC)}g.extend(i,h.KS[d.type]);if(d.KG){g.extend(i,h.KS[d.KG])}g.extend(i,k(h),j.L);if(e){g.extend(i,j.BC)}g.extend(i,j.KS[d.type]);if(d.KG){g.extend(i,j.KS[d.KG])}g.extend(i,k(j),g.CR,d.FF);if(!d.HL){d.HL=i}return(d.W=i)},tagAnchors:function(d){this[fb.PB](d)},activateElements:function(g){var n=this;if(!n.ET){return n.I(function(){n[fb.PB](g)},50)}if(!(g=fb$(g))){if(n.CB){n.CB(-1)}for(var k=0;k<n.AD.length;k++){try{if(n.AD[k]&&n.AD[k][fb.QM]){n[fb.PB](n.AD[k][fb.QM])}}catch(l){}}return}function h(o){var q=g[fb.SG](o);for(var p=0,e=q.length;p<e;p++){n.HR(q[p],c,b,m)}}function d(t,o){var s=n.HS(t[fb.SD]("data-fb-options")||t[fb.SD]("rev")||""),q=t[fb.SG](o),r=q.length;if(!s.autoTypes){s.autoTypes="image|media|html"}s.BD=t[fb.PV];while(r--){var e=q[r];if(!/\bnofloatbox\b/i.test(e[fb.PV]+" "+e[fb.SD]("rel"))){var u=n.HS(e[fb.SD]("data-fb-options")||e[fb.SD]("rev")||""),p=n.extend({},s,u);e[fb.UZ]("data-fb-options",n.FT(p))}}}var m=n.ownerInstance(g),j=n[fb.SF](n.floatboxClass,g[fb.UG]||g),k=j.length;while(k--){var f=j[k];if(!/^a(rea)?$/.test(n.J(f))){d(f,"a");d(f,"area")}}h("a");h("area")},HR:function(d,h,m,p){var r=this,q={},n;q.FF=h||{};d=d||q.FF.source||q.FF.html||q.FF.href;if(!d&&q.FF.showThis!==b){return}q.source=q.D=d;var l=r.anchors.length;while(l--){if(r.anchors[l].source===d){return m?r.anchors[l]:r[fb.VT]}}q.KH=m;if(m){q.M=fb[fb.TD].M}else{q.M=isNaN(p)?r.ownerInstance(q.AE):p}if(r.typeOf(d)==="node"){if(/^a(rea)?$/.test(r.J(d))){var k=r.HS(d[fb.SD]("data-fb-options")||d[fb.SD]("rev"));q.FF=r.extend(k,q.FF);q.href=d.href||"";try{q.href=decodeURI(q.href)}catch(o){}q.AI=d[fb.SD]("rel")||"";q.AJ=d[fb.SD]("title")||"";q.AH=d[fb.PV]||"";q.HO=d[fb.UG];q.AE=d;q.KK=d[fb.SG]("img")[0]||c;if((n=(new RegExp("\\b"+r.floatboxClass+"(\\S*)","i")).exec(q.AH))){q.KH=a;if(n[1]){q.group=n[1]}}else{if(r.HP.L.autoGallery&&!/\bnofloatbox\b/i.test(q.AH+" "+q.AI)&&r.CX(q.href)===fb.ST){q.KH=a;q.group=".autoGallery"}else{if((n=/^(?:floatbox|gallery|iframe|slideshow|lytebox|lyteshow|lyteframe|lightbox)(.*)/i.exec(q.AI))){q.KH=a;q.group=n[1];if(/^(slide|lyte)show/i.test(q.AI)){q.FF.doSlideshow=a}else{if(/^(i|lyte)frame/i.test(q.AI)){q.type="html";q.KG=fb.SS}}}}}if(q.KK&&((n=/(?:^|\s)fbPop(up|down|left|right|pip)(?:\s|$)/i.exec(q.AH)))){q.HY=n[1];r.HX.push(q)}}else{q.type="html";q.KG=fb.SY}}q.D=q.FF.source||q.FF.href||q.href||d;if(!q.type){q.D=r.decodeHTML(q.D);if(/<.+>/.test(q.D)){q.type="html";q.KG="direct"}else{if((n=/#([a-z][^\s=]*)$/i.exec(q.D))){var j=r.CY(n[1],q.HO);if(j){q.D=j;q.type="html";q.KG=fb.SY}}}if(!q.type){q.type=(q.FF.type||r.CX(q.D))[fb.VR]();if(q.type==="img"){q.type=fb.ST}if(/^(iframe|inline|ajax|direct)$/.test(q.type)){q.KG=q.type;q.type="html"}if(/^(flash|quicktime|wmp|silverlight|pdf)$/.test(q.type)){q.KG=q.type;q.type=fb.TG}}}if(!q.KH&&q.FF.autoTypes&&(q.FF.autoTypes[fb.SW](q.type)>-1||(q.KG&&q.FF.autoTypes[fb.SW](q.KG)>-1))){q.KH=a}if(!q.KH){return}if(r.ie&&q.KG==="pdf"&&r.FD(q.D)){q.type="html";q.KG=fb.SS}if(q.KG===fb.SY){q.BN=r.LC(q.D)}r.JD(q);q.group=q.W.group||q.group||"";if(m){r.anchors.splice(0,0,q)}else{r.anchors.push(q)}if(q.type===fb.TG){r.DK(fb.TG)}if(q.href&&!fb[fb.PL]){if(r.AM){if(q.W.showThis!==b&&q.href[fb.SW](r.AM)>-1){fb[fb.PL]=q}}else{if(q.W[fb.PL]===a){fb[fb.PL]=q}else{if(q.W[fb.PL]==="once"){var n=/fbAutoShown=(.+?)(?:;|$)/.exec(document.cookie),g=n?n[1]:"",f=escape(q.href);if(g[fb.SW](f)===-1){fb[fb.PL]=q;document.cookie="fbAutoShown="+g+f+"; path=/"}}}}}if(r.EK&&q.AE){q.AE.hideFocus="true"}if(q.AE&&!m){r[fb.PC](q.AE,"click",r.DC(q,r),r.BG,q.M);q.AE[fb.TX]=c}if(m){return q}},DC:function(d,e){return function(f){if(!(f&&(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey))||d.W.showThis===b||(d.type!==fb.ST&&d.KG!==fb.SS)){e.start(this);return e[fb.VN](f)}}},CX:function(j){if(typeof j!==fb.VO){return""}var g=j.search(/[\?#]/),f=(g!==-1)?j[fb.VQ](0,g):j,g=f.lastIndexOf(".")+1,h=g?f[fb.VQ](g)[fb.VR]():"",e,k={youtube:/\.com\/(watch\?v=|watch\?(.+)&v=|v\/[\w\-]+)/,"video.yahoo":/\.com\/watch\/\w+\/\w+/,dailymotion:/\.com\/swf\/\w+/,vimeo:/\.com\/\w+/,vevo:/\.com\/(watch\/\w+|videoplayer\/(index|embedded)\?)/i};if(/^(jpe?g|png|gif|bmp)$/.test(h)){return fb.ST}if(!h||/^(html?|php\d?|aspx?)$/.test(h)){return fb.SS}if(h==="swf"){return"flash"}if(h==="pdf"){return"pdf"}if(h==="xap"){return fb.VK}if(/^(mpe?g|movi?e?|3gp|3g2|m4v|mp4|m1v|mpe|qt)$/.test(h)){return"quicktime"}if(/^(wmv?|avi|asf)$/.test(h)){return"wmp"}if((e=/^(?:http:)?\/\/(?:www.)?([a-z\.]+)\.com\//i.exec(f))&&e[1]){var d=e[1][fb.VR]();if(k[d]&&k[d].test(j)){return"flash"}}return fb.SS},CY:function(j,f){var e=this,h=c;if(typeof j===fb.VO){h=(f&&f[fb.SE](j))||e.H[fb.SE](j)||fb$(j);var d=fb[fb.TB].length,g;while(!h&&d--&&(g=fb[fb.TB][d])){if(e.J(g[fb.QZ])===fb.SS&&!e.FD(g[fb.QZ].src)){if((f=e[fb.SH](g[fb.QZ]))){h=f[fb.SE](j)}}}}return h},LC:function(g){var f=this,d=g[fb.UL],e="fbWrapper";if(d[fb.PV]===e){return d}else{var h=g[fb.UG][fb.QF]("div");h[fb.PV]=e;h.style[fb.QL]=f[fb.SM](g,fb.QL);h.style[fb.VU]=f[fb.SM](g,fb.VU);d.replaceChild(h,g);h[fb.PG](g);if(f[fb.SM](g,fb.QL)===fb.TQ){g.style[fb.QL]="block"}if(f[fb.SM](g,fb.VU)===fb.SR){g.style[fb.VU]=fb.VV}return h}},HS:function(m){var p=this,l={},n=p.typeOf(m);if(n===fb.TS){return m}if(!m||n!==fb.VO){return l}var k=[],j,h=/`([^`]*?)`/g;h.lastIndex=0;while((j=h.exec(m))){k.push(j[1])}if(k.length){m=m[fb.UV](h,"``")}m=m[fb.UV](/[\r\n]/g," ");m=m[fb.UV](/\s{2,}/g," ");m=m[fb.UV](/\s*[:=]\s*/g,":");m=m[fb.UV](/\s*[;&,]\s*/g," ");m=m[fb.UV](/^\s+|\s+$/g,"");m=m[fb.UV](/(:\d+)px\b/gi,"$1");var e=m.split(" "),g=e.length;while(g--){var f=e[g].split(":"),d=f[0],o=f[1];if(d){if(!isNaN(o)){o=+o}else{if(o==="true"){o=a}else{if(o==="false"){o=b}else{if(o==="``"){o=k.pop()||""}}}}l[d]=o}}return l},FT:function(f){var e="",d,g;for(d in f){g=f[d];if(g!==""){if(/[:=&;,\s]/.test(g)){g="`"+g+"`"}e+=d+":"+g+" "}}return e},JE:function(f){var e=this;for(var d in f){if(e.CC.hasOwnProperty(d)&&f[d]!==""){e[d]=f[d]}}},DK:function(e,f){var d=fb;if(e&&!(d[e+"Loaded"]||d.GK[e])){if(!/core|options/.test(e)&&!d.coreLoaded){return d.I(function(){d.DK(e,f)},120)}d.GK[e]=a;d[fb.QU]((f||d.GJ)+e+".js"+d.FH)}},executeJS:function(d,l){var m=this,k=m.H||document,j=m.CF||k[fb.SG]("head")[0]||k[fb.QN],g=k[fb.QF]("script");function f(){j[fb.UT](g);g=g.onload=g[fb.UB]=c;if(m.typeOf(l)===fb.SC){l()}}g.type="text/javascript";if(l===a){fb.execRtn=m[fb.VT];if(!/[\n\r]/.test(d)){d='fb.execRtn = eval("'+d[fb.UV](/\\/g,"\\\\")[fb.UV](/"/g,'\\"')+'")'}try{g[fb.PG](document.createTextNode(d))}catch(h){g.text=d}j[fb.PG](g);var i=fb.execRtn;f();delete fb.execRtn;return i}else{g.onload=g[fb.UB]=function(){if(/^$|complete|loaded/.test(this.readyState||"")){f()}};g.src=d;j.insertBefore(g,j[fb.RZ])}},getStyle:function(l,e,q){var r=this,g;function o(s){return q?r.Q(r.DG(s)||0):s||""}if(!(l=fb$(l))){return c}if(window.getComputedStyle){var f=l[fb.UG]&&l[fb.UG][fb.QJ];if(!(g=f&&f.getComputedStyle(l,""))){return c}if(e){e=e[fb.UV](/([A-Z])/g,"-$1")[fb.VR]();return o(g.getPropertyValue(e))}}e=e&&e[fb.UV](/-(\w)/g,function(s,t){return t.toUpperCase()});if(l.currentStyle){g=l.currentStyle;if(e){var m=g[e]||"";if(/^[\.\d]+[^\.\d]/.test(m)&&!/^\d+px/i.test(m)){var p=l[fb.UG],i=p[fb.QF]("xxx"),n,h;if(/html|body/.test(fb.J(l))){n=l;h=l[fb.RZ]}else{n=l[fb.UL];h=l}n.insertBefore(i,h);i.style.left=m;m=i.style.pixelLeft+"px";n[fb.UT](i)}return o(m)}}if(g&&!e){var k="",d,j;if(g.cssText){k=g.cssText}else{for(d in g){j=g[d];if(isNaN(d)&&j&&typeof j===fb.VO){k+=d[fb.UV](/([A-Z])/g,"-$1")[fb.VR]()+": "+j+"; "}}}return k}return o((l.style&&e&&l.style[e])||"")},addEvent:function(g,j,h,n,l){var p=this;if((g=fb$(g))){if(g[fb.TO]==9&&/^DOMContentLoaded$/i.test(j)){var k=p.CG.length;while(k--){if(p.CG[k]===h){break}}if(k===-1){p.CG.push(h)}}else{if(g[fb.PD]){g[fb.PD](j,h,b)}else{if(g.attachEvent){if(!n){n=p.DT(h)}p[fb.UU](g,j,h,n);var f="on"+j,m=j+n,e=f+n,o=g[fb.UG]||g,d=o[fb.UM]||g;g[m]=h;g[e]=function(q){if(!q){var i=g[fb.UG];q=i&&i[fb.UM]&&i[fb.UM].event}if(q&&!q.target){q.target=q.srcElement}if(g&&g[m]){return g[m](q)}};g.attachEvent(f,g[e])}}}if(l||l===0){if(!fb.CQ[l]){fb.CQ[l]=[]}fb.CQ[l].push({a:g,b:j,c:h,d:n})}}return h},removeEvent:function(g,i,h,l){var m=this;g=fb$(g);try{if(!(g&&(g[fb.TO]||g[fb.QM]))){return}}catch(j){return}if(g[fb.PD]){g.removeEventListener(i,h,b)}else{if(g.detachEvent){if(!l){l=m.DT(h)}var f="on"+i,k=i+l,d=f+l;if(g[d]){g.detachEvent(f,g[d])}g[d]=g[k]=c}}},DT:function(g){var f=g+"",e=f.length,d=e;while(d--){e=((e<<5)^(e>>27))^f.charCodeAt(d)}return e},stopEvent:function(f){if((f=f||window.event)){if(f.stopPropagation){f.stopPropagation()}if(f.preventDefault){f.preventDefault()}try{f.cancelBubble=a}catch(d){}try{f.returnValue=b}catch(d){}try{f.cancel=a}catch(d){}}return b},getElementsByClassName:function(n,f){var p=this;if(p.typeOf(n)===fb.PH){var o=arguments.callee,d=n.pop();if(n.length){return o(n,f).concat(o(d,f))}else{n=d}}var m=[],e,k,g,l;if(/\[native code\]/.test(f[fb.SF])){e=f[fb.SF](n);k=e.length;while(k--){m[k]=e[k]}}else{var h=new RegExp("(^|\\s)"+n+"(\\s|$)");e=f[fb.SG]("*");for(k=0,g=0,l=e.length;k<l;k++){if(h.test(e[k][fb.PV])){m[g++]=e[k]}}}return m},typeOf:function(e){var f=typeof e;if(f===fb.TS){if(e){var g=Object.prototype.toString.call(e)[fb.VR](),d;if((d=/(array|string)/.exec(g))){f=d[1]}else{if(e[fb.TO]&&e.cloneNode&&e.constructor!==Object){f="node"}}}else{f="null"}}else{if(f==="unknown"){f=fb.SC}}return f},J:function(d){return((d&&d.nodeName)||"")[fb.VR]()},ownerInstance:function(j){if(!(j=fb$(j))){return}var f=this,l,h,g,e=j[fb.UG]||j,d=fb[fb.TB].length;function k(m){var o=f[fb.SH](m);if(o===e){return a}var n=(o||m)[fb.SG](fb.SS),i=n.length;while(i--){if(k(n[i])){return a}}return b}while(d--){if((l=fb[fb.TB][d])&&(h=l.fbBox)){if(f[fb.TN](h,j)||((g=l[fb.QZ])&&k(g))){return d}}}return -1},nodeContains:function(d,e){if(!((d=fb$(d))&&(e=fb$(e)))){return}if(e[fb.TO]==3){e=e[fb.UL]}if(d===e){return a}if(!e[fb.TO]||e[fb.TO]==9){return b}if(d[fb.TO]==9){d=d[fb.QN]}if(d.contains){return d.contains(e)}if(d[fb.PZ]){return !!(d[fb.PZ](e)&16)}},hasAttribute:function(f,e){if(!(f=fb$(f))){return}var d=this;if(f.hasAttribute){return f.hasAttribute(e)}return(new RegExp("<[^>]+[^>\\w-=\"']"+e+"[^\\w\\-]","i")).test(d[fb.SK](f))},encodeHTML:function(d){if(typeof d!==fb.VO){return d}return d[fb.UV](/&/g,"&amp;")[fb.UV](/</g,"&lt;")[fb.UV](/>/g,"&gt;")[fb.UV](/"/g,"&quot;")},decodeHTML:function(d){if(typeof d!==fb.VO){return d}return d[fb.UV](/&lt;/g,"<")[fb.UV](/&gt;/g,">")[fb.UV](/&quot;/g,'"')[fb.UV](/&apos;/g,"'")[fb.UV](/&amp;/g,"&")},setInnerHTML:function(d,h){if(!(d=fb$(d))){return b}try{d[fb.TA]=h;return a}catch(l){}try{var m=d[fb.UG],j=m.createRange();j.selectNodeContents(d);j.deleteContents();if(h){var f=(new DOMParser).parseFromString('<div xmlns="http://www.w3.org/1999/xhtml">'+h+"</div>","application/xhtml+xml"),n=f[fb.QN].childNodes;for(var g=0,k=n.length;g<k;g++){d[fb.PG](m.importNode(n[g],a))}}return a}catch(l){}return b},getOuterHTML:function(d){if(!(d=fb$(d))){return""}if(d.outerHTML){return d.outerHTML}var e=(d[fb.UG]||d[fb.QM])[fb.QF]("div");e[fb.PG](d.cloneNode(a));return e[fb.TA]},getIframeWindow:function(g){var f=this,d=fb.SS;g=fb$(g);if(f.J(g)!==d){if(f.J(f[fb.QZ])===d){g=f[fb.QZ]}else{if(f.J(fb[fb.TD][fb.QZ])===d){g=fb[fb.TD][fb.QZ]}}}if(f.J(g)===d){try{var i=g.contentWindow||(g.contentDocument&&g.contentDocument[fb.QJ]);if(i.location.href){return i}}catch(h){}}return c},getIframeDocument:function(e){var d=this,f=d[fb.SI](e);return(f&&f[fb.QM])||c},FD:function(e){var d=this;if(typeof e!==fb.VO){return a}if(e&&e[fb.SW]("//")===0){e=(d.Z||self).location.protocol+e}return/^https?:\/\/\w/i.test(e)&&e[fb.VR]()[fb.SW](fb.AO)!==0},flashObject:function(){var l=this,j=arguments,m=j[0];if(l.typeOf(m)!==fb.TS){m={url:j[0],width:j[1],height:j[2],params:j[3],node:j[4],id:j[5],altContent:j[6]}}var k=m.width?(m.width+"")[fb.UV]("px",""):"100%",g=m.height?(m.height+"")[fb.UV]("px",""):"100%",e={wmode:"opaque",scale:"exactfit",play:"false",quality:"high"},f=fb$(m.node);l.extend(e,l.HS(m.params));var i='<object class="fbFlashObject" width="'+k+'" height="'+g+'" '+(m.id?'id="'+m.id+'" ':"");if(l.EN){i+='classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,115,0"><param name="movie" value="'+m.url+'" />'}else{i+='type="application/x-shockwave-flash" data="'+m.url+'"><param name="pluginspage" value="http://get.adobe.com/flashplayer/" />'}for(var d in e){if(e.hasOwnProperty(d)){i+='<param name="'+d+'" value="'+e[d]+'" />'}}i+=(m.altContent||"")+"</object>";if(f&&f[fb.TO]==1){l[fb.VA](f,i)}else{document.write(i)}},start:function(f,d){var e=this;e.I(function(){e.start(f,d)},100)},preload:function(e,g,f){var d=this;d.I(function(){d.preload(e,g,f)},250)},BW:function(e,f){var d=this;d.I(function(){d.BW(e,f)},200)},KN:function(f,e,g){var d=this;d.I(function(){d.KN(f,e,g)},200)},HU:function(e){var d=this;d.I(function(){d.HU(e)},150)},translate:function(f,d,g){var e=this;e.I(function(){e.translate(f,d,g)},200)},ajax:function(h,g){var d=this;if(g===d[fb.VT]){if(window.XMLHttpRequest){g=new XMLHttpRequest}else{try{g=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(f){try{g=new ActiveXObject("Msxml2.XMLHTTP")}catch(f){}}}}g=g||b;d.I(function(){d.ajax(h,g)},200);return g},printNode:function(f,e){var d=this;d.I(function(){d.printNode(f,e)},200)},K:function(e,f){var d=this;d.I(function(){d.K(e,f)},200)}})})();var fb$=function(a){return typeof a===fb.VO?(document[fb.SE](a)||null):a};if(typeof fb.EN===fb.VT){fb.proto.FH=fb.DN("script","src",/floatbox.js(\?.*)$/i);fb.proto.EN=0;(function(){var a=document[fb.QF]("div");fb[fb.VA](a,'<!--[if IE]><div id="fb_ieChk"></div><![endif]-->');if(a[fb.RZ]&&a[fb.RZ].id==="fb_ieChk"){if(document.documentMode){fb.proto.EN=document.documentMode}else{fb[fb.VA](a,'<!--[if lt IE 7]><div id="fb_ie6"></div><![endif]-->');fb.proto.EN=a[fb.RZ]&&a[fb.RZ].id==="fb_ie6"?6:7}}fb[fb.VA](a,"");a=null})()}if(fb.EN&&fb.EN<9){document.write('<xml:namespace ns="urn:schemas-microsoft-com:vml" prefix="v" />')}fb[fb.PC](document,"DOMContentLoaded",fb.JX);fb[fb.PC](window,"load",function(){fb.HG();var g=self[fb.QM].body;if(!(g&&fb.ET)){return fb.I(arguments.callee,50)}if(g[fb.SG]("a").length>document.fbAnchorCount){fb[fb.PB](g)}try{var b=parent.fb[fb.TD];if(b[fb.SI]()===self){if(b.coreLoaded&&b.IY==="no"){b.resize()}if(!b.modal){b[fb.PC](document[fb.QN],"click",function(){if(b!==parent.fb.topBox){b.IP()}})}}}catch(f){}var c;if(self===fb.Z&&fb[fb.VD]!==fb.TQ&&fb[fb.VC]){var d=fb.DP+"shadow",a="_s"+fb[fb.VC]+"_r"+fb[fb.QE]+".png";c=[fb.AQ,d+"Top"+a,d+"Right"+a,d+fb.QD+a,d+fb.QD+a[fb.UV]("_r"+fb[fb.QE],"_r0"),d+"Bottom"+a,d+"Left"+a]}fb.I(function(){if(self.fb){fb.preload(c,null,true)}},200);fb[fb.PC](window,"unload",function(){if(self.fb&&fb.E&&fb.Z===self){fb.E("*");var e=fb[fb.TB].length;while(e--){fb.CB(e);fb.CD(e)}fb.CB(-1);var e=fb.HZ.length;while(e--){fb.HZ[e]=null}}})});if(document[fb.PD]){document[fb.PD]("DOMContentLoaded",fb.HG,false)};(function(){/*@cc_on try{document.body.doScroll('up');return fb.HG();}catch(e){}/*@if (false) @*/if(/loaded|complete/.test(document.readyState))return fb.HG();/*@end @*/if(fb.CG.length)fb.I(arguments.callee,20);})();
(function(){
  if (window.cloudsponge && fb) {
    window.cloudsponge.fb = fb;
    window.cloudsponge.fb$ = fb$;
  }
}());

}  // end double include guard

manageImportedContacts = function(contacts, source, owner) {
  $("#" + source + "_selected_contacts_count").parent("span").show();
  if($(contacts).length > 1)
    $("#" + source + "_selected_contacts_count").html($(contacts).length + " Contacts have");
  else
    $("#" + source + "_selected_contacts_count").html($(contacts).length + " Contact has");

  var emails = [];
  for (var i = 0; i < contacts.length; i++) {
    contact = contacts[i];
    name = contact.fullName();
    email = contact.selectedEmail();
    entry = name + "<" + email +">";
    if (emails.indexOf(entry) < 0) {
      emails.push(entry);
    }
  }
  $("#" + source + "_contacts_ckb").prop("checked", true);
  $("#" + source + "_selected_contacts").html(emails.join(", "));
  $("#" + source + "_selected_contacts").val(emails.join(", "));
  $("#" + source + "_contacts_edit_link").show();
  $("#" + source + "_edit_link_sperator").hide();
  if ($(contacts).length == 0) {
     $("#" + source + "_contacts_ckb").prop("checked", false);
     $("#" + source + "_contacts_edit_link").parent("span").hide();
  }
}

jQuery.fn.center = function () {
    this.css("position","absolute");
    this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) +
                                                $(window).scrollTop()) + "px");
    this.css("left", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) +
                                                $(window).scrollLeft()) + "px");
    return this;
}

var csPageOptions = {
  domain_key: "<%=APP_CONFIG["THIRD_PARTY"]["CLOUDSPONAGE"]["APP_KEY"]%>",
  afterSubmitContacts:manageImportedContacts,
  skipSourceMenu: true,
  beforeLaunch: function(){
    console.log("BEFORE LANUCH !!!!!");
    $('#fbBox').hide();
  },
  afterImport: function(source, success){
    $('#fbBox').center();
    $('#fbBox').show();
    $('#loading_icon').hide();
  }
};
