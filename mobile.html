<!DOCTYPE html>


<html>

<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densityDpi=medium-dpi">


    <script src="LiveRail.AdManager-1.0.js"></script>
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
    var LiveRailVPAID;
    AD_COMPLETED = false;
    V_STARTED = false;
    $(function() {




        $('#videoElement_html5_api').bind('ended', function() {
            var videoEl = document.getElementById('videoElement_html5_api');
            videoEl.webkitExitFullScreen()

        });
        // $("video").on("play",function(){
        //     var that=this
        //     this.playing=true //video that is playing is "playing"
        //     $("video").each(function(i,o){
        //         if(o.playing && !$(o).is($(that)) ){ //for all the other "playing" video
        //           o.pause()
        //           $(o).trigger("ended")
        //         }
        //     })

        // })

        $('.videoElement').bind('pause', function() {
            console.log(' Video is pause ');
        });

        $('.videoElement').bind('progress', function(e) {
            console.log(' Video is progress ');
            
            //$('#state').html('');
            $('#state').hide();
        });

        $('.videoElement').bind('canplay', function(e) {
            console.log(' Video is canplay ');
            $('#log').append(' <hr>  --------- Video canplay ');
            
        });


        $('.videoElement').bind('playing', function(e) {
            console.log('  Video is playing ');
            $('#log').append(' <hr>--------- Video is playing ');
        });



        $('.videoElement').bind('loaddata', function(e) {
            console.log(' Video is loaddata ');
            console.log(' <hr> Video is loaddata ');
        });




        $('.videoElement').bind('waiting', function(e) {
            console.log(' Video is waiting ');
            //$('#state').html('Loading Icon');
            $('#state').show();
        }); 
        $('.videoElement').bind('timeupdate', function(e) {
            console.log(' Video is timeupdate ');
            //$('#state').html('');
        });

        $('.videoElement').bind('error', function(ex) {
            console.log(' Video is error ');
            console.log(ex);
        });


        $('.videoElement').bind('ended', function() {
            $('#log').append('<hr> ' + "endede -- ");

            AD_COMPLETED = true;
            // If IOS
            var videoEl = $('.videoElement')[0];
            videoEl.webkitExitFullScreen()
            videoEl.playing = false;
            videoEl.currentTime = 0;

            // $('#videoElement').remove();


            // var videlem = document.createElement("video");
            // videlem.id = "videoElement"
            // videlem.src = "https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4";
            // // videlem.width = "100%";
            // // videlem.height = "100%";

            // document.getElementById('videoWrapper').appendChild(  videlem  )
            // videlem.play();



            // If IOS

            if (AD_COMPLETED && !V_STARTED) {



                //$('#videoElement').remove();


                // var videlem = document.createElement("video");
                // videlem.id = "videoElement"
                // videlem.src = "https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4";
                // // videlem.width = "100%";
                // // videlem.height = "100%";

                // var source = document.createElement('source');
                // source.setAttribute('src', 'https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4');

                // videlem.appendChild(source);

                // document.getElementById('videoWrapper').appendChild(  videlem  )
                // videlem.load();
                // videlem.play();




                console.log('-              --------  add AdComplete')
                var video = $('.videoElement')[0];


                $('.videoElement').attr('src', 'https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4')

                //video.setAttribute('src', 'https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4');

                var source = document.createElement('source');
                source.setAttribute('src', 'https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4');

                $('.videoElement')[0].appendChild(source);
                $('.videoElement')[0].load();

                $('.videoElement')[0].play();



                V_STARTED = true;

                // setTimeout( function(){ 
                // }, 2000 );


            }





            //var video = document.getElementById('videoElement1');
            // var source = document.createElement('source');

            // video.setAttribute('src', 'https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4');
            // source.setAttribute('src', 'https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4');

            // video.appendChild(source);
            //video.play();


        });


        $('#playAd').on('click', function() {
            LiveRailVPAID.startAd();
            $('#playAd').hide();


            // var video = document.getElementById('videoElement1');
            // video.play();
            // video.pause();    
            // video.webkitExitFullScreen()




            // setTimeout( function(){

            // }, 3000);



        });
        LiveRailVPAID = getVPAIDAd();
        LiveRailVPAID.handshakeVersion('2.0');

        /* setTimeout(function(){
            onVPAIDLoad();
        },5000);*/

        var creativeData = {},
            environmentVars = {
                slot: videoWrapper,
                videoSlot: $('.videoElement')[0],
                videoSlotCanAutoPlay: true,
                LR_PUBLISHER_ID: 1331,
                LR_TAGS: 'demo',
                LR_MUTED: 1,
                LR_LAYOUT_SKIN_MESSAGE: 'Advertisement. Video will resume in {COUNTDOWN} seconds.',
            };
        //initAdButton.setAttribute('disabled', 'disabled');
        //Initializean ad
        LiveRailVPAID.initAd($('.videoElement').width(), $('.videoElement').height(), 'normal', 512, creativeData, environmentVars);

        LiveRailVPAID.subscribe(function() {

            console.log('ad loaded');
        }, 'AdLoaded');

        LiveRailVPAID.subscribe(function(message) {
            //playerReset();

            console.log('------------ complete');
        }, 'AdStopped');
        LiveRailVPAID.subscribe(function(message) {
            console.log(message);
            //$('#log').append('<hr> ' + message);
            console.log('message');
        }, 'AdLog');
        //var vid = videojs("videoElement");

    });

    function playerReset() {
            //Load content(playercantakecontrolatthispoint)
            // if (videoElement.canPlayType('video/mp4') === '' && videoElement.canPlayType('video/webm') !== '') {
            //     videoElement.src = 'http://cdn-static.liverail.com/sample/html5/uivideo.webm';
            // } else {
            //     videoElement.src = 'http://cdn-static.liverail.com/sample/html5/uivideo.mp4';

            //videoElement.src = 'https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4';
            // console.log( ' i am in player rest')
            // $('#videoElement_html5_api').attr('src','https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4' );
            // $('#videoElement_html5_api').load();
            // $('#videoElement_html5_api').play()
            //alert('asdf')

            var video = document.getElementById('videoElement');
            var source = document.createElement('source');

            video.setAttribute('src', 'https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4');
            source.setAttribute('src', 'https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4');

            video.appendChild(source);
            video.play();

            // }
            //videoElement.load();
            console.log('playerReset ');
            //initAdButton.removeAttribute('disabled');
        }
        //DefineinitialVPAID setup
    function onVPAIDLoad() {
        //Subscribetoevents
        console.log('-----');
        LiveRailVPAID.subscribe(function() {
            /* startAdButton.removeAttribute('disabled');
            videojs("videoElement", {}, function() {
                // Player (this) is initialized and ready.
            });*/
            LiveRailVPAID.startAd();
        }, 'AdLoaded');
        LiveRailVPAID.subscribe(function() {
            playerReset();
            videojs("videoElement").play();
        }, 'AdStopped');
        LiveRailVPAID.subscribe(function() {
            playerReset();
        }, 'AdError');
        LiveRailVPAID.subscribe(function(message) {
            console.log(message);
            console.log('message');
        }, 'AdLog');
        LiveRailVPAID.subscribe(function(message) {
            playerReset();

            console.log('------------ complete');
        }, 'AdComplete');
    }
    </script>

</head>

<body>

    <div id="playAd" style="display:inline-block: width:80% ; height: 100px; background: #ccc">
        Click to Play
    </div>
    <div id="state" style="display:none;"> 
        <img style="-webkit-user-select: none" src="http://www.loadinfo.net/images/preview/14_cyrle_four_24.gif?1384388177">
    </div>

    <div id="videoWrapper" style="">
        <video x-webkit-airplay="allow" class="video-js videoElement vjs-default-skin" height="100%" width="100%" controls src="https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4" poster="">
            <source id="videoSource" src="https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4" type="video/mp4">
        </video>


        <!--      <video id="videoElement1" x-webkit-airplay="allow" class="video-js vjs-default-skin" height="100%" width="100%" controls src="https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4" poster="">
            <source id="videoSource" src="https://d3hh3bpy3h68fd.cloudfront.net/processed_videos/47fad7e0-7477-0132-8e95-123139254ded/_preview_1280x720_2932_edit.mp4" type="video/mp4">
        </video> -->



    </div>

    <div id="log">--- </div>


    <!-- <video class="_mjob _mueb" x-webkit-airplay="allow" data-youtube-id="uILRaTj0RZU" style="width: 384px; height: 180px; left: 0px; top: 0px; transform: none;" controls="true" src="blob:http%3A//m.youtube.com/ba80e9c1-3f45-4c69-9dcb-f1c8307b17ae"></video>


   <video class="_mjob _mueb" x-webkit-airplay="allow" data-youtube-id="undefined" style="width: 384px; height: 180px; left: 0px; top: 0px; transform: none;" src="http://gcdn.2mdn.net/videoplayback/id/e66410443fd0f0f4/itag/18/source/doubleclick_dmm/ratebypass/yes/ip/0.0.0.0/ipbits/0/expire/3551702847/sparams/id,itag,source,ratebypass,ip,ipbits,expire/signature/BB373BDEDB0DF0BA8376CA954C638CD3D3FCE24B.416EC1BDC1E972002570B5647DAA372D3C5AECE0/key/ck2/file/file.mp4?c=MWEB&amp;cver=html5"></video> -->
</body>

</html>
